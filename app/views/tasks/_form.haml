-content_for :head do
  =javascript_include_tag "tasks/linked_taxa_token_field"
  =javascript_include_tag "tasks/preview_markdown"

=form_for @task do |f|
  =render "shared/errors_for", resource: @task
  .row
    .medium-6.columns
      =f.label :title
      =f.text_field :title, { maxlength: 70, disabled: @task.archived? }

    .medium-6.columns
      #linked_taxa
        =f.label :linked_taxa
        =f.text_field :taxa_tokens, data: { load: @task.taxa.to_json(root: nil) }
  .row
    .medium-12.columns
      %ul#task-tabs.tabs{"data-tabs" => ""}
        %li.tabs-title.is-active
          =link_to "Description", "#description"
        %li.tabs-title
          =link_to "Preview", "#preview", id: "preview_markdown_link"
        %li.tabs-title
          =link_to "Formatting Help", "#formatting_help"

      .tabs-content{"data-tabs-content" => "task-tabs"}
        #description.tabs-panel.is-active
          =f.text_area :description, cols: 80, rows: 15, disabled: @task.archived?

        #preview.tabs-panel

        #formatting_help.tabs-panel
          =render "markdown_formatting_help"

  =button_tag "Save", class: "btn-save" unless @task.archived?
  