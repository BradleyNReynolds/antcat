- @title = 'Taxatry'

- content_for :head do
  = javascript_include_tag 'taxatry'

- content_for :header do
  .left
    %h1 Taxatry

%style
  :sass
    div.taxon
      float: left
      a
        color: red
    div.synonym
      a
        color: black
    div.unidentifiable
      a
        color: green
    div.unavailable
      a
        color: purple
    div.homonym
      a
        color: brown

    .selected
      background: yellow !important

    .taxonomic_history
      height: 9.2em
      overflow: auto
      position: relative
      text-align: left
      padding: 5px
      padding-top: 0

    #subfamilies
      height: 500px
    
    #genera
      height: 542px
      width: 560px
      overflow: auto
    
    #species
      height: 500px
      width: 388px
      overflow: auto
    
    .rank_header
      text-align: left
      font-size: 1.5em
      padding-bottom: 5px
      border-bottom: 1px black solid

    .teensy
      font-size: .90em
      width: 50px
      line-height: .90em

    body
      width: 1240px
      
.taxonomic_history
  = @taxonomic_history

%table{:style => 'border-top: 1px solid black; margin-top: 10px'}
  %tr
    %td
      %table{:style => 'border-right: 1px black solid'}
        %tr
          %td.rank_header Subfamilies
        %tr
          %td{:style => 'width: 100px'}
            #subfamilies
              %table
                - @subfamilies.each do |subfamily|
                  %tr
                    %td= taxon_link subfamily, @selected_subfamily

    %td{:style => 'width: 577px; padding-bottom: 5px'}
      %table{:style => 'border-right: 1px black solid'}
        %tr
          %td.rank_header Genera
        %tr{:style => 'border-top: 1px solid black; padding-bottom: 5px'}
          %td
            #genera
              - if @genera
                %table
                  - column_count = @genera.count / 30.0
                  - css_class = ''
                  - if column_count < 1
                    - column_count = 1
                  - else
                    - column_count = column_count.ceil
                  - if column_count > 5
                    - column_count = 5
                    - css_class = 'teensy'
                  - rows = @genera.snake column_count
                  - rows.each do |row|
                    %tr
                      - row.each do |genus|
                        %td{:class => css_class}
                          - if genus
                            = taxon_link genus, @selected_genus

    %td
      %table
        %tr
          %td.rank_header Species
        %tr
          %td
            #species
              - if @species
                %table
                  - column_count = @species.count / 30.0
                  - css_class = ''
                  - if column_count < 1
                    - column_count = 1
                  - else
                    - column_count = column_count.ceil
                  - if column_count > 4
                    - column_count = 4
                    - css_class = 'teensy'
                  - rows = @species.snake column_count
                  - rows.each do |row|
                    %tr
                      - row.each do |species|
                        %td{:class => css_class}
                          - if species
                            = taxon_link species, @selected_species

%div.clear
