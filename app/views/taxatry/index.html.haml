- @title = 'Taxatry'

- content_for :head do
  = javascript_include_tag 'taxatry'

- content_for :header do
  .left
    %h1 Taxatry

%style
  :sass
    div.taxon
      float: left
      width: 130px
    .selected
      background: yellow !important
    .taxon_not_available
      text-decoration: strikethrough
    .taxon_not_valid
      color: blue

%div
  = label_tag :show_tribes, 'Show tribes?'
  = check_box_tag :show_tribes, '1', @show_tribes
  %hr

%table.subfamilies
  - @subfamilies.unshift 'all'
  - rows = @subfamilies.snake 6
  - rows.each do |row|
    %tr
      - row.each do |subfamily|
        %td
          - if subfamily == 'all'
            = all_of_a_taxon_link :subfamily, @selected_subfamily
          - elsif subfamily
            = taxon_link :subfamily, @selected_subfamily, subfamily


- if @tribes
  %hr
    %table.tribes
      - rows = @tribes.snake 6
      - rows.each do |row|
        %tr
          - row.each do |tribe|
            %td
              - if tribe == 'all'
                = all_of_a_taxon_link :tribe, @selected_tribe
              - elsif tribe
                = taxon_link :tribe, @selected_tribe, tribe, :subfamily => @selected_subfamily

- if @genera
  %hr
    %table.genera
      - rows = @genera.snake 6
      - rows.each do |row|
        %tr
          - row.each do |genus|
            %td
              - if genus == 'all'
                = all_of_a_taxon_link :genus, @selected_genus
              - elsif genus
                = genus_or_species_link :genus, @selected_genus, genus, :subfamily => @selected_subfamily, :tribe => @selected_tribe

- if @species
  %div.species
    %hr
      - @species.each do |species|
        = genus_or_species_link :species, @selected_species, species, :subfamily => @selected_subfamily, :tribe => @selected_tribe, :genus => @selected_genus
  %div.clear
