-@title = "PaperTrail Versions"
-breadcrumb :versions

=render_filters do
  =render "shared/primitive_search_inputs"

.callout
  Total versions: #{@version_count} (#{Time.zone.now}).

-if @versions.first
  .center-text
    -first_version_date = @versions.first.created_at
    %h5=time_ago_in_words first_version_date
    %h6=first_version_date

-if @versions.count.zero?
  .alert.callout Found no versions.
-else
  %table
    %thead
      %tr
        %th ID
        %th Event
        %th Type
        %th Item ID
        %th When
        %th
        %th
    %tbody
      -@versions.each do |version|
        %tr
          %td=link_to version.id, version_path(version)
          %td=version.event
          %td=version.item_type
          %td=version.item_id
          %td.no-wrap=version.created_at
          %td=version.decorate.revision_history_link
          %td
            =inline_expandable version.inspect do
              %pre=version.to_yaml

-if @versions.last
  .center-text
    -last_version_date = @versions.last.created_at
    %h5=time_ago_in_words last_version_date
    %h6=last_version_date

=will_paginate @versions
