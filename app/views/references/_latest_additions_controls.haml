-#Locals: reference

%td.date
  = reference.decorate.created_at

- if user_can_edit?

  %td.review_state
    = reference.decorate.format_review_state

  %td.review_buttons
    - if reference.can_finish_reviewing?
      = button_to_path 'Finish reviewing', finish_reviewing_reference_path(reference), class: 'finish_reviewing', data: { confirm: 'Have you finished reviewing this reference?' }
    - elsif reference.can_start_reviewing?
      = button_to_path 'Start reviewing', start_reviewing_reference_path(reference), class: 'start_reviewing', data: { confirm: 'Are you ready to start reviewing this reference?' }
    - elsif reference.can_restart_reviewing?
      = button_to_path 'Restart reviewing', restart_reviewing_reference_path(reference), class: 'restart_reviewing', data: { confirm: 'Do you want to start reviewing this reference again?' }

  %td.default_reference_status
    - if reference == DefaultReference.get(session)
      Default
    - else
      = button_to_path 'Make default', default_reference_path(id: reference.id), method: :put